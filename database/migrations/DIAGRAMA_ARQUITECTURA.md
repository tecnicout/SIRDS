# ğŸ“Š DIAGRAMA DE ARQUITECTURA - SISTEMA DE CICLOS DE DOTACIÃ“N

## 1ï¸âƒ£ ESTRUCTURA DE TABLAS

```
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   salario_minimo        â”‚
                                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                    â”‚ PK: id_salario          â”‚
                                    â”‚ UK: anio                â”‚
                                    â”‚     valor_mensual       â”‚
                                    â”‚     creado_por â”€â”€â”€â”     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â”‚
                                                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   usuario               â”‚        â”‚   ciclo_dotacion        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id_usuario          â”‚â†â”€â”€â”€â”€â”€â”€â”€â”‚ PK: id_ciclo            â”‚
â”‚     username            â”‚        â”‚ UK: fecha_entrega       â”‚
â”‚     email               â”‚        â”‚     nombre_ciclo        â”‚
â”‚     id_rol              â”‚        â”‚     estado              â”‚
â”‚     activo              â”‚        â”‚     creado_por          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚     id_area_produccion â”€â”¼â”€â”€â”
                                   â”‚     id_area_mercadista â”€â”¼â”€â”€â”¼â”€â”€â”
                                   â”‚     valor_smlv_aplicado â”‚  â”‚  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                                              â”‚                 â”‚  â”‚
                                              â”‚                 â”‚  â”‚
                                              â†“                 â†“  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   empleado              â”‚        â”‚   empleado_ciclo        â”‚  â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚ PK: id_empleado         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”‚ PK: id_empleado_ciclo   â”‚  â”‚  â”‚
â”‚     Identificacion      â”‚        â”‚ UK: (id_ciclo,          â”‚  â”‚  â”‚
â”‚     nombre/apellido     â”‚        â”‚      id_empleado)       â”‚  â”‚  â”‚
â”‚     fecha_inicio        â”‚â—„â”€â”€â”    â”‚     estado              â”‚  â”‚  â”‚
â”‚     sueldo              â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”‚     antiguedad_meses    â”‚  â”‚  â”‚
â”‚     id_area             â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”‚     sueldo_al_momento   â”‚  â”‚  â”‚
â”‚     estado              â”‚   â”‚    â”‚     id_area             â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚     actualizado_por â”€â”€â”€â”€â”¼â”€â”€â”¤  â”‚
                              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                              â”‚                                 â”‚  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   area                  â”‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚
â”‚ PK: id_area             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     nombre_area         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚     estado              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²
     â”‚ Ãreas crÃ­ticas:
     â”œâ”€ ProducciÃ³n (id=1)
     â””â”€ Mercadista (nuevo)
```

## 2ï¸âƒ£ FLUJO DE CREACIÃ“N DE CICLO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOTÃ“N "NUEVO CICLO DOTACIÃ“N"                 â”‚
â”‚                    (Solo activo en ventana vÃ¡lida)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   VALIDACIÃ“N DE VENTANA    â”‚
         â”‚   (1 mes antes de entrega) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  OBTENER SMLV AÃ‘O ACTUAL   â”‚
         â”‚  salario_minimo.valor      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    CONSULTAR EMPLEADOS ACTIVOS             â”‚
         â”‚    WHERE estado = 1                        â”‚
         â”‚      AND id_area IN (ProducciÃ³n,           â”‚
         â”‚                      Mercadista)           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    APLICAR CRITERIOS DE ELEGIBILIDAD       â”‚
         â”‚    âœ“ AntigÃ¼edad â‰¥ 3 meses                  â”‚
         â”‚    âœ“ Sueldo: 1-2 SMLV                      â”‚
         â”‚    âœ“ Ãrea: ProducciÃ³n o Mercadista         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    CREAR CICLO_DOTACION                    â”‚
         â”‚    INSERT INTO ciclo_dotacion              â”‚
         â”‚    estado = 'pendiente'                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    CREAR EMPLEADO_CICLO (por cada uno)     â”‚
         â”‚    INSERT INTO empleado_ciclo              â”‚
         â”‚    estado = 'procesado'                    â”‚
         â”‚    (guardar snapshot de datos)             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    ACTUALIZAR TOTAL_EMPLEADOS_ELEGIBLES    â”‚
         â”‚    UPDATE ciclo_dotacion                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    MOSTRAR CONFIRMACIÃ“N AL USUARIO         â”‚
         â”‚    "X empleados agregados al ciclo"        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3ï¸âƒ£ ESTADOS Y TRANSICIONES

### Ciclo DotaciÃ³n

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  pendiente  â”‚ â† Estado inicial al crear
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Usuario activa el ciclo
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   activo    â”‚ â† Ciclo en proceso de entregas
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Todas las entregas completadas
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   cerrado   â”‚ â† Ciclo finalizado
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Empleado Ciclo

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  procesado  â”‚ â† Estado inicial (asignado al ciclo)
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                         â”‚
           â”‚ Se entrega              â”‚ No recibe dotaciÃ³n
           â†“                         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  entregado  â”‚          â”‚   omitido   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4ï¸âƒ£ CÃLCULO DE ELEGIBILIDAD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EMPLEADO EVALUADO                            â”‚
â”‚                                                                 â”‚
â”‚  â€¢ ID: 12                                                       â”‚
â”‚  â€¢ Nombre: Ricardo Alexander Gomez                             â”‚
â”‚  â€¢ Ãrea: ProducciÃ³n (id=1)                                     â”‚
â”‚  â€¢ Fecha inicio: 2025-10-06                                    â”‚
â”‚  â€¢ Sueldo: $1,700,666                                          â”‚
â”‚  â€¢ Estado: Activo (1)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CRITERIO 1: ANTIGÃœEDAD    â”‚
         â”‚                            â”‚
         â”‚  Fecha evaluaciÃ³n:         â”‚
         â”‚    2025-11-06              â”‚
         â”‚  Fecha inicio:             â”‚
         â”‚    2025-10-06              â”‚
         â”‚  Diferencia: 1 mes         â”‚
         â”‚                            â”‚
         â”‚  Â¿â‰¥ 3 meses? âŒ NO         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CRITERIO 2: SUELDO        â”‚
         â”‚                            â”‚
         â”‚  SMLV 2025: $1,423,500     â”‚
         â”‚  Rango:                    â”‚
         â”‚    MÃ­n: $1,423,500         â”‚
         â”‚    MÃ¡x: $2,847,000         â”‚
         â”‚  Sueldo empleado:          â”‚
         â”‚    $1,700,666              â”‚
         â”‚                            â”‚
         â”‚  Â¿En rango? âœ… SÃ          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CRITERIO 3: ÃREA          â”‚
         â”‚                            â”‚
         â”‚  Ãreas elegibles:          â”‚
         â”‚    - ProducciÃ³n (id=1)     â”‚
         â”‚    - Mercadista (id=X)     â”‚
         â”‚  Ãrea empleado:            â”‚
         â”‚    ProducciÃ³n (id=1)       â”‚
         â”‚                            â”‚
         â”‚  Â¿Elegible? âœ… SÃ          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CRITERIO 4: ESTADO        â”‚
         â”‚                            â”‚
         â”‚  Estado requerido: 1       â”‚
         â”‚  Estado empleado: 1        â”‚
         â”‚                            â”‚
         â”‚  Â¿Activo? âœ… SÃ            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    RESULTADO FINAL         â”‚
         â”‚                            â”‚
         â”‚  âŒ NO ELEGIBLE            â”‚
         â”‚                            â”‚
         â”‚  RazÃ³n: AntigÃ¼edad         â”‚
         â”‚         insuficiente       â”‚
         â”‚         (1 de 3 meses)     â”‚
         â”‚                            â”‚
         â”‚  SerÃ¡ elegible en:         â”‚
         â”‚  2025-12-06 (2 meses)      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5ï¸âƒ£ EJEMPLO DE DATOS INSERTADOS

### salario_minimo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id_salario â”‚ anio           â”‚ valor_mensual            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1          â”‚ 2024           â”‚ $1,300,000.00            â”‚
â”‚ 2          â”‚ 2025           â”‚ $1,423,500.00 â† ACTUAL   â”‚
â”‚ 3          â”‚ 2026           â”‚ $1,423,500.00 (proyect.) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ciclo_dotacion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id_ciclo â”‚ nombre_ciclo  â”‚ fecha_entrega â”‚ inicio_vent. â”‚ fin_ventana  â”‚ estado    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1        â”‚ Ciclo Q4 2025 â”‚ 2025-12-05    â”‚ 2025-11-05   â”‚ 2025-12-05   â”‚ pendiente â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â†‘                â†‘
                                                â”‚                â”‚
                                                â”‚                â””â”€ Fecha de entrega
                                                â”‚
                                                â””â”€â”€ Ventana de ejecuciÃ³n: 30 dÃ­as
```

## 6ï¸âƒ£ LÃNEA DE TIEMPO DE CICLO

```
Noviembre 2025                    Diciembre 2025
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 1  2  3  4  5  6  7  8  9 10 11 12 ... 1  2  3  4  5
                â–²                               â–²
                â”‚                               â”‚
         Inicio ventana                  Fecha entrega
         (Nov 5, 2025)                   (Dic 5, 2025)
                â”‚                               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ 30 dÃ­as â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     (Ventana de ejecuciÃ³n)

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  BOTÃ“N "NUEVO CICLO" HABILITADO      â”‚
         â”‚  Solo ejecutable en este perÃ­odo     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Fuera de ventana:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Oct 30  Oct 31  Nov 1  Nov 2  Nov 3  Nov 4
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  BOTÃ“N DISABLED  â”‚
                                    â”‚  "Fuera de       â”‚
                                    â”‚   ventana"       â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7ï¸âƒ£ JERARQUÃA DE ARCHIVOS DE MIGRACIÃ“N

```
database/migrations/
â”‚
â”œâ”€â”€ ğŸ“„ INDEX.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ãndice completo
â”œâ”€â”€ ğŸ“„ RESUMEN_EJECUTIVO.md â”€â”€â”€â”€â”€â”€â”€â”€â”€ Este resumen
â”œâ”€â”€ ğŸ“„ README_EJECUCION.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GuÃ­a detallada
â”œâ”€â”€ ğŸ“„ DIAGRAMA_ARQUITECTURA.md â”€â”€â”€â”€â”€ Este archivo
â”‚
â”œâ”€â”€ ğŸ¯ 000_EJECUTAR_MIGRACION_COMPLETA.sql â† **EJECUTAR ESTE**
â”‚   â”‚
â”‚   â”œâ”€â–º Llama a: 001_limpieza_areas_preparacion.sql
â”‚   â””â”€â–º Llama a: 002_sistema_ciclos_dotacion.sql
â”‚
â”œâ”€â”€ ğŸ“œ 001_limpieza_areas_preparacion.sql
â”‚   â”œâ”€â–º Consolida ProducciÃ³n (id=5 â†’ id=1)
â”‚   â”œâ”€â–º Elimina duplicado
â”‚   â””â”€â–º Agrega Ã¡rea Mercadista
â”‚
â”œâ”€â”€ ğŸ“œ 002_sistema_ciclos_dotacion.sql
â”‚   â”œâ”€â–º Crea tabla salario_minimo
â”‚   â”œâ”€â–º Crea tabla ciclo_dotacion
â”‚   â”œâ”€â–º Crea tabla empleado_ciclo
â”‚   â””â”€â–º Inserta datos iniciales
â”‚
â”œâ”€â”€ âœ… VALIDAR_MIGRACION.sql
â”‚   â”œâ”€â–º Valida Ã¡reas consolidadas
â”‚   â”œâ”€â–º Valida tablas creadas
â”‚   â”œâ”€â–º Valida foreign keys
â”‚   â”œâ”€â–º Valida datos iniciales
â”‚   â””â”€â–º Simula empleados elegibles
â”‚
â””â”€â”€ âš¡ EJECUTAR_MIGRACION.ps1
    â””â”€â–º Script PowerShell automatizado (Windows)
```

## 8ï¸âƒ£ MAPA DE DEPENDENCIAS

```
                    usuario
                      â”‚
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â†“              â†“
              salario_minimo    ciclo_dotacion â†â”€â”€â”€ area
                      â”‚              â”‚              â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                             â†“                      â”‚
                      empleado_ciclo â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                             â†‘                      â”‚
                             â””â”€â”€â”€â”€â”€â”€ empleado â”€â”€â”€â”€â”€â”€â”˜

LEYENDA:
â†’  Foreign Key
â”€  RelaciÃ³n de datos
```

## 9ï¸âƒ£ PRÃ“XIMOS COMPONENTES (Fase 2 y 3)

```
Backend (Fase 2)                    Frontend (Fase 3)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

models/                             components/
â”œâ”€â”€ SalarioMinimoModel.js          â”œâ”€â”€ Modal/
â”œâ”€â”€ CicloDotacionModel.js          â”‚   â””â”€â”€ ModalNuevoCiclo.jsx
â””â”€â”€ EmpleadoCicloModel.js          â”‚
                                   â”œâ”€â”€ DataTable/
controllers/                       â”‚   â””â”€â”€ DataTableCiclos.jsx
â””â”€â”€ CiclosController.js            â”‚
    â”œâ”€â”€ listarCiclos()             â””â”€â”€ Cards/
    â”œâ”€â”€ crearCiclo()                   â””â”€â”€ CardCicloActivo.jsx
    â”œâ”€â”€ calcularElegibles()
    â”œâ”€â”€ actualizarEstado()         pages/
    â””â”€â”€ obtenerKpis()              â””â”€â”€ Dotaciones.jsx
                                       â””â”€â”€ Tab: "Ciclos"
routes/
â””â”€â”€ ciclosRoutes.js
    â”œâ”€â”€ GET /api/ciclos
    â”œâ”€â”€ POST /api/ciclos/nuevo
    â”œâ”€â”€ GET /api/ciclos/:id
    â”œâ”€â”€ PUT /api/ciclos/:id
    â””â”€â”€ GET /api/ciclos/:id/elegibles
```

---

**Creado:** 2025-11-06  
**Proyecto:** SIRDS - Sistema de Ciclos de DotaciÃ³n  
**VersiÃ³n:** 1.0
